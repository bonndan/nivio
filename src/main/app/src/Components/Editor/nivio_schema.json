{
  "$id": "https://dedica.team/nivio.schema.json",
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Nivio DSL",
  "description": "A landscape configuration",
  "definitions": {
    "Relation": {
      "type": "object",
      "properties": {
        "target":{
          "type": "string",
          "description": "A fully qualified identifier or parts of it (e.g. myservice or mygroup/myservice)"
        },
        "format":{
          "type": "string",
          "description": "Format of transferred data"
        },
        "type":{
          "type": "string",
          "enum": ["dataflow", "provider"],
          "description": "relation type"
        },
        "description":{
          "type": "string",
          "description": "A brief description"
        }
      },
      "required": ["target"]
    },
    "Item": {
      "type": "object",
      "properties": {
        "identifier": {
          "type": "string",
          "description": "Identifier (must be unique in a group)"
        },
        "name": {
          "type": "string",
          "description": "Common name"
        },
        "contact": {
          "type": "string",
          "description": "Contact (preferably email)"
        },
        "owner": {
          "type": "string",
          "description": "Who is responsible for this item?"
        },
        "description": {
          "type": "string",
          "description": "A brief description"
        },
        "note": {
          "type": "string",
          "description": "A note (anything not belonging into the description, like a to-do)"
        },
        "group": {
          "type": "string",
          "description": "The name of the group the item belongs to."
        },
        "icon": {
          "type": "string",
          "description": "A URL to "
        },
        "color": {
          "type": "string",
          "description": "Hex color"
        },
        "scale": {
          "type": "string",
          "description": "A number representing instances (stored as label)"
        },
        "hostType": {
          "type": "string",
          "description": "Type of hosting (e.g. docker, stored as label)"
        },
        "lifecycle": {
          "type": "string",
          "enum": ["planned", "integration", "production", "end_of_life"],
          "description": "Type of hosting (e.g. docker, stored as label)"
        },
        "tags": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "A list of strings to be used as tags."
        },
        "relations": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/Relation"
          },
          "description": "A list of strings to be used as tags."
        }
      },
      "required": ["identifier"]
    }
  },
  "required": [ "identifier", "items" ],
  "type": "object",
  "properties": {
    "identifier": {
      "type": "string",
      "description": "A unique identifier of the landscape"
    },
    "description": {
      "type": "string",
      "description": "A short description of the landscape"
    },
    "contact": {
      "type": "string",
      "description": "A contact address, preferably email."
    },
    "items": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/Item"
      }
    }
  }
}